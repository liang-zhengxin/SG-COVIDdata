<!DOCTYPE html>
<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<style>
    div {
    display: inline-block;
    margin-bottom:50px;
    width:50%;
    max-height:200px;
    float: left;
    }

    canvas {
    max-width:100%; 
    }
</style>
<body>
    <div>
        <canvas id="chart0" style="width:512px;height:320px"></canvas>
    </div>

    <div>
        <canvas id="chart1" style="width:512px;height:320px"></canvas>
    </div>
</body>
<script>
    let x = []
    let y = []

    fetch("https://liang-zhengxin.github.io/SG-COVIDdata/data/dailyLocalCases.json")
        .then(response => response.json())
        .then(data=> {add(data)});

    function add(data) {
        for (const [key, value] of Object.entries(data)) {
            x.push(key)
            y.push(value)
            console.log(`${key}: ${value}`);
        }
        
    }

    
    function show(x,y) {
        
        var samples = 100;
        var speed = 1000;
        var values = [];
        var labels = [];
        var charts = [];
        var value = 0;

        values.length = samples;
        labels.length = samples;
        values.fill(0);
        labels.fill(0);

        function initialize() {
        charts.push(new Chart(document.getElementById("chart0"), {
            type: 'line',
            data: {
            labels: labels,
            datasets: [{
                data: values,
                backgroundColor: 'rgba(255, 99, 132, 0.1)',
                borderColor: 'rgb(255, 99, 132)',
                borderWidth: 2,
                lineTension: 0.25,
                pointRadius: 0 
            },{
                data: values,
                backgroundColor: 'rgba(55, 99, 132, 0.1)',
                borderColor: 'rgb(55, 99, 132)',
                borderWidth: 2
            }]
            },
            options: {
            responsive: true,
            maintainAspectRatio: true,
            animation: {
                duration: speed * 1,
                easing: 'linear'
            },
            legend: false,
            scales: {
                xAxes: [{
                display: true,
                ticks: {
                        autoSkip:true,
                        maxTicksLimit:10}
                }],
                yAxes: [{
                ticks: {
                    max: 60,
                    min: 0
                }
                }]
            }
            }
        }), 
                    
        new Chart(document.getElementById("chart1"), {
            type: 'bar',
            data: {
            labels: labels,
            datasets: [{
                data: values,
                backgroundColor: 'rgba(255, 99, 132, 0.1)',
                borderColor: 'rgb(255, 99, 132)',
                borderWidth: 2
            }]
            },
            options: {
            responsive: true,
            maintainAspectRatio: true,
            animation: {
                duration: speed * 1,
                easing: 'linear'
            },
            legend: false,
            scales: {
                xAxes: [{
                display: true,
                ticks: {
                        autoSkip:true,
                        maxTicksLimit:10}
                }],
                yAxes: [{
                ticks: {
                    max: 60,
                    min: 0
                }
                }]
            }
            }
        }));
        }


        function advance() {
        var d = new Date();
        
        labels.push(d.getSeconds());
        labels.shift();
        
        
        values.push(d.getSeconds());

        values.shift();
        
        charts.forEach(function(chart) { chart.update(); });

        setTimeout(function() {
            requestAnimationFrame(advance);
        }, speed);
        }

        window.onload = function() {
        initialize();
        advance();
        };
    }

</script>
</html>